## 6.1.3 ì‹±ê¸€íŒ¨í„´ì˜ ì ìš©

```java
public class Logger {
    private FileWriter writer;

    public Logger() {
        final File file = new File("log.txt"); // ğŸ’¥
        try {
            writer = new FileWriter(file, true);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }

    public void log(String message) {
        try {
            writer.write(message);
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
}
```

ìœ„ì™€ ê°™ì€ ì½”ë“œë¼ë©´ ê° ìŠ¤ë ˆë“œì—ì„œ ì„œë¡œ ë‹¤ë¥¸ Logger ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ì„œ ì‚¬ìš©í•œë‹¤ê³  í•˜ë”ë¼ë„ ë¬¸ì œê°€ğŸ’¥Â  ìˆë‹¤

- ë™ì¼í•œ íŒŒì¼ì— ëŒ€í•´ ì ‘ê·¼í•˜ê³  ìˆëŠ” ë¬¸ì œ
    - ë™ì‹œ ì ‘ê·¼ì‹œ, íŒŒì¼ í¬ì¸í„°ë¥¼ ê³µìœ í•´, ë¡œê·¸ê°€ ë®ì–´ì”Œì›Œì§€ê²Œ ë¨.

ğŸ’¡Â ì´ëŸ° ë¦¬ì†ŒìŠ¤ ê²½í•© ë¬¸ì œëŠ” ì–´ë–»ê²Œ í•´ê²° í•´ì•¼ í• ê¹Œ  ?

- âœ…Â ì—­ì‹œ, ì ê¸ˆ
    - ê·¸ì•¼ë§ë¡œ, í•œ ê³³ ì—ì„œë§Œ ì„ ì í•  ìˆ˜ ìˆëŠ” Lock ìœ¼ë¡œëŠ” mutex ê°€ ìˆìœ¼ë©° ( ì„¸ë§ˆí¬ì–´ëŠ” , 2ê°œ ì´ìƒì´ ì ìœ í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥ ) , ê°€ì¥ ê°„ë‹¨í•˜ê²Œ synchronized ë¥¼ ì‚¬ìš©í•´ ì•„ë˜ì™€ ê°™ì´ êµ¬í˜„

        ```java
            public void log0(String message) {
                try {
                    writer.write(message);
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
            
            public void log1(String message) {
                try {
                    synchronized (this) { // ğŸ’¥
                        writer.write(message);    
                    }
                } catch (IOException e) {
                    throw new RuntimeException(e);
                }
            }
        ```

        - í•˜ì§€ë§Œ , lock ì„ ê±°ëŠ” ëŒ€ìƒì´ â€œLogger ì¸ìŠ¤í„´ìŠ¤â€ ì„. â†’ â€œê°ì²´ ìˆ˜ì¤€ì˜ ì ê¸ˆâ€
            - ì„œë¡œ ë‹¤ë¥¸ ìŠ¤ë ˆë“œì—ì„œ ì„œë¡œ ë‹¤ë¥¸ Logger ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì‚¬ìš©í•´ ê°™ì€ íŒŒì¼ì— ì ‘ê·¼í•˜ëŠ” ìƒí™©ì—ì„  ì—­ì‹œ ë¬´ìš©ì§€ë¬¼
        - ê·¸ë¦¬ê³  log1 ì²˜ëŸ¼ ì•ˆ í•´ë„ ì´ë¯¸ FilreWriter í´ë˜ìŠ¤ íŠ¹ì„±ìƒ log0 ì™€ ê°™ì€ ìƒí™©ì„ ( FileWriter ë‚´ë¶€ë¥¼ íŒŒê³ ë“¤ì–´ê°€ë©´ , ìœ„ì™€ ê°™ì´ ê°ì²´ë‹¨ìœ„ì˜ ì ê¸ˆì´ ì´ë¯¸ ê±¸ë ¤ìˆìŒ)

          ![img_1.png](img_1.png)

    - ë¶„ì‚°ì ê¸ˆ
        - ì•ˆì •ì ,ë²„ê·¸ì—†ëŠ”,ê³ ì„±ëŠ¥ ë¶„ì‚°ì ê¸ˆ êµ¬í˜„ì€ ì–´ë ¤ì›€.
    - ë™ì‹œ ëŒ€ê¸°ì—´(BlockingQueue..)
        - ì—¬ëŸ¬ ìŠ¤ë ˆë“œê°€ë™ì‹œ ëŒ€ê¸°ì—´ì—ëŠ” ë™ì‹œì— ê¸°ë¡, ë³„ë„ì˜ ìŠ¤ë ˆë“œê°€ file ì— ë¡œê¹…
        - ì•„ë˜ ê·¸ë¦¼ excalidraw code

        ![img_2.png](img_2.png)

- âœ…Â ê·¼ë³¸ì ì¸ ë¬¸ì œ í•´ê²°
    - ì„œë¡œ ë‹¤ë¥¸ Logger â€˜ê°ì²´â€™ë¥¼ ì‚¬ìš©í•˜ë©° ë²Œì–´ì§€ëŠ” ì¼
        - ì‹±ê¸€í„´ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ëœ Logger ê°ì²´ í•˜ë‚˜ë§Œì„ ì‚¬ìš©í•˜ë„ë¡ í•˜ê¸°

## 6.1.4 ì‹±ê¸€í„´ íŒ¨í„´ ë‹¨ì 

ì•„ë˜ ì—¬ëŸ¬ ë‹¨ì ë“¤ ë•Œë¬¸ì— **ì•ˆí‹°íŒ¨í„´ì´ë¼ê³  ì¸ì‹ë˜ê¸°ë„ í•œë‹¤**

- âœ…Â í´ë˜ìŠ¤ê°„ ì˜ì¡´ì„±ì„ ê°ì¶˜ë‹¤
    - ë³´í†µ, ë§¤ê°œë³€ìˆ˜ ì „ë‹¬ ê°™ì€ ê²ƒì„ í†µí•´ í´ë˜ìŠ¤ê°„ ì˜ì¡´ì„±ì´ í™•ì‹¤íˆ ë“œëŸ¬ë‚œë‹¤.
    - í•˜ì§€ë§Œ ì‹±ê¸€í„´ í´ë˜ìŠ¤ëŠ”, ë§ˆì¹˜ Util í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë“¯ì´ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•´ ë²„ë¦´ ìˆ˜ ìˆìŒ
        - ì´ë¡œ ì¸í•´, **êµ¬í˜„ ë‚´ë¶€ë¥¼ ì£¼ì˜ê¹Šê²Œ ì‚´í´ë´ì•¼, ì‹±ê¸€í†¤ í´ë˜ìŠ¤ì— ëŒ€í•œ ì˜ì¡´ì„±**ì´ ë³´ì„.
- âœ…Â ì½”ë“œ í™•ì¥ì„±ì— ì˜í–¥
    - ì´ë¯¸ ì‹±ê¸€í„´ í´ë˜ìŠ¤ë¡œ ì„¤ê³„ëœ ê²ƒì€,  ëŒ€ë¶€ë¶„ ì „ì—­ í´ë˜ìŠ¤ë¡œ ì‚¬ìš©ë˜ê³  ìˆì„ ê²ƒ.
    - ë‚˜ì¤‘ì— 2ê°œ ì´ìƒ ì¸ìŠ¤í„´ìŠ¤ê°€ í•„ìš”í•´ì§€ë©´ ì½”ë“œë¥¼ ì „ë©´ ìˆ˜ì •í•˜ëŠ” ìˆ˜ ë°–ì— ì—†ìŒ.
- âœ…Â ì½”ë“œì˜ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì— ì˜í–¥
    - íŠ¹íˆ **ì‹±ê¸€í„´ í´ë˜ìŠ¤ê°€ ì™¸ë¶€ ë¦¬ì†ŒìŠ¤ì— ì˜ì¡´**í•˜ëŠ” ê²½ìš°
        - í…ŒìŠ¤íŠ¸ì—ì„œ ì´ë¥¼ Mocking í•´ ì¤„ìˆ˜ë„ ì—†ìŒ.
    - ë©¤ë²„ ë³€ìˆ˜ë¥¼ ê°€ì§„ ê²½ìš°
        - í•´ë‹¹ ë©¤ë²„ë³€ìˆ˜ëŠ” ì‹¤ì§ˆì ìœ¼ë¡œ ì „ì—­ë³€ìˆ˜ ê°™ì€ íš¨ê³¼.
            - ì–´ë–¤ í…ŒìŠ¤íŠ¸ì—ì„œ ì´ ê°’ì„ ë³€ê²½í•˜ë©´, í…ŒìŠ¤íŠ¸ë“¤ì˜ ë…ë¦½ì„±ì´ ê¹¨ì§
- âœ…Â ë§¤ê°œë³€ìˆ˜ê°€ ìˆëŠ” ìƒì„±ìë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŒ

    ```java
        private static UseInitSingleton instance = null;
        private final int paramA;
        private final int paramB;
    
        public UseInitSingleton(final int paramA, final int paramB) {
            this.paramA = paramA;
            this.paramB = paramB;
        }
    ```

    - ì•¼ë§¤ ë°©ë²• 1 :  **ì½”ë“œ ì‹¤í–‰ ì˜ì¡´ì„±ì´ ë°œìƒ (Init â†’ getInstance í˜¸ì¶œí•´ì•¼í•¨)**

        ```java
        
            public static UseInitSingleton getInstance() {
                if(instance == null) {
                    throw new RuntimeException("Run init() first");
                }
                return instance;
            }
        
            public synchronized static UseInitSingleton init(int paramA, int paramB) {
                if(instance != null) {
                    throw new RuntimeException("Singleton has been created");
                }
                instance = new UseInitSingleton(paramA, paramB);
                return instance;
            }
        ```

    - ì•¼ë§¤ ë°©ë²• 2 : í•„ë“œì— ë„£ì–´ì¤„ ê°’ì„, ì „ì—­ ë³€ìˆ˜ë¡œ ì„ ì–¸í•´ë‘ê³  ì´ë¥¼ ì‚¬ìš©

        ```java
        public class Config {
        	public static final int PARAM_A = 12;
        	public static final int PARMA_B = 23;
        }
        
        public class Singleton {
        	private static final Signleton instance = null;
        	private final int paramA;
        	private final int paramB;
        	
        	private Singleton() {
        		this.paramA = Config.PARAM_A;
        		..
        	}
        ```

    - ì•¼ë§¤ ë°©ë²• 3

        ```java
            public static UseInitSingleton getInstance2(int paramA, int paramB){
                if(instance == null){
                    instance = new UseInitSingleton(paramA, paramB);
                }
                return instance;
            }
        ```

      ì•„ë˜ì™€ ê°™ì€ ë°©ì‹ì€ ë¬¸ì œê°€ ì¡´ì¬í•¨

        ```java
        UseInitSingleton singleton1 = getInstance2(10,20);
        UseInitSingleton singleton2 = getInstance2(30,40); // singleton2 ë„ 10,20 ìœ¼ë¡œ ìƒì„±ëœ ê°ì²´ì„( ì´ë¯¸ ì‹±ê¸€í„´ ê°ì²´ê°€ ì•ì—ì„œ ìƒì„±)
        ```


## 6.1.5 ì‹±ê¸€í„´ íŒ¨í„´ ëŒ€ì•ˆ

- ì „ì—­ì ìœ¼ë¡œ í´ë˜ìŠ¤ ê°ì²´ê°€ í•˜ë‚˜ë§Œ ìƒì„±ë¨ì„ ë³´ì¥í•˜ëŠ” ë‹¤ë¥¸ ë°©ë²• ?
    - íŒ©í† ë¦¬ íŒ¨í„´
    - Spring ê°™ì€ DI ì»¨í…Œì´ë„ˆë¥¼ ì‚¬ìš©
- ì „ì—­ì  ìœ ì¼ì„± , í™•ì¥ ê°€ëŠ¥, í…ŒìŠ¤íŠ¸ ìš©ì´ì„± ë³´ì¥
- ì‹±ê¸€í„´ íŒ¨í„´ì´ ì•ˆí‹°íŒ¨í„´ì´ë©° ì‚¬ìš©í•˜ë©° ì•ˆëœë‹¤ëŠ” ì£¼ì¥ì€ ë‹¤ì†Œ ê·¹ë‹¨ì . ë””ìì¸ íŒ¨í„´ì€ ì ì ˆí•œ ì‚¬ìš©ì²˜ì— ì‚¬ìš©í•˜ë©´ ëœë‹¤.
    - ì´í›„ í™•ì¥ë  ê°€ëŠ¥ì„±ì´ ì—†ê³ , ì™¸ë¶€ì‹œìŠ¤í…œì— ì˜ì¡´í•˜ì§€ ì•Šìœ¼ë©´, ì „ì—­ì ìœ¼ë¡œ ìœ ì¼í•˜ë„ë¡ ì œí•œí•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì‹±ê¸€í†¤ í´ë˜ìŠ¤ë¡œ ë””ìì¸í•´ë„ ì¢‹ë‹¤.
        - ì¥ì 
            - new ë¥¼ í†µí•´ ìƒì„±í•´ì„œ í´ë˜ìŠ¤ ì‚¬ì´ì— ì „ë‹¬í•  í•„ìš” ì—†ë‹¤ ( ì´ê²Œ ì˜ì¡´ì„±ì„ ìˆ¨ê¸´ë‹¤ê³  í•˜ê¸´ í–ˆì—ˆì§€ë§Œ )

# 6.2 ë¶„ì‚° ì‹±ê¸€í„´ íŒ¨í„´

## 6.2.1 ì‹±ê¸€í„´ íŒ¨í„´ì˜ ìœ ì¼ì„±

- **ì¼ë°˜ì ì¸ ì‹±ê¸€í„´ íŒ¨í„´ìœ¼ë¡œ ì„¤ê³„ëœ í´ë˜ìŠ¤ì˜ ê°ì²´ëŠ” â€œí•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤(ì§€ê¸ˆì€ JVM) ë‚´ì—ì„œ ì „ì—­ì ìœ¼ë¡œ ìœ ì¼í•¨ì„ ë³´ì¥â€**
    - ë§Œì•½ ì‹±ê¸€í„´ íŒ¨í„´ìœ¼ë¡œ êµ¬í˜„ëœ ê°ì²´ë¥¼ ê°€ì§„ í”„ë¡œì„¸ìŠ¤ì—ì„œ fork() ë¥¼ ì‚¬ìš©í•´ child process ìƒì„± í•œë‹¤ë©´, ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì—ë„ ë³µì‚¬ëœ ì‹±ê¸€í„´ í´ë˜ìŠ¤ì™€, í•´ë‹¹ í´ë˜ìŠ¤ì˜ ê°ì²´ê°€ ì¡´ì¬í•œë‹¤.
    - **ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ì— ê±¸ì³ ìœ ì¼í•˜ì§€ëŠ” ì•Šë‹¤**
    - **(+) Java ì—ì„œëŠ”, ë” ì—„ê²©í•˜ê²Œ ë§í•˜ë©´ â€œí”„ë¡œì„¸ìŠ¤â€ ê°€ ì•„ë‹Œ â€œí´ë˜ìŠ¤ ë¡œë”â€ ë‚´ì—ì„œ ìœ ì¼**
- í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ìœ ì¼ vs ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ìœ ì¼
    - í”„ë¡œì„¸ìŠ¤ ë‚´ì—ì„œ ìœ ì¼ : í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ìœ ì¼í•  ë¿ë§Œ ì•„ë‹ˆë¼, í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ë‚´ì— ìˆëŠ” ëª¨ë“  ìŠ¤ë ˆë“œì— ê±¸ì³ ìœ ì¼
    - ìŠ¤ë ˆë“œ ë‚´ì—ì„œ ìœ ì¼ : í•˜ë‚˜ì˜ ìŠ¤ë ˆë“œ ë‚´ì—ì„œë§Œ ìœ ì¼. **ì—¬ëŸ¬ ìŠ¤ë ˆë“œì— ê±¸ì³ì„œëŠ” ìœ ì¼í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŒ.**
- ìŠ¤ë ˆë“œ ì „ìš© ì‹±ê¸€í„´ íŒ¨í„´ ì½”ë“œ

    ```java
    public class ThreadSingleton {
        private AtomicLong id = new AtomicLong(0);
        private static final ConcurrentHashMap<Long, IdGenerator> instances
                = new ConcurrentHashMap<>();
    
        private ThreadSingleton() {
        }
    
        public static IdGenerator getInstance() {
            final long currentThreadID = Thread.currentThread().getId();
            instances.putIfAbsent(currentThreadID, new IdGenerator());
            return instances.get(currentThreadID);
        }
    
        public long getId() {
            return id.incrementAndGet();
        }
    }
    ```


## 6.2.3 í´ëŸ¬ìŠ¤í„° í™˜ê²½ì—ì„œ ì‹±ê¸€í„´ íŒ¨í„´

- í”„ë¡œ ì„¸ìŠ¤ ê°„ì—ë„ ìœ ì¼í•˜ë„ë¡ êµ¬í˜„í•˜ê¸°
    1. ë¶„ì‚°ë½ íšë“
    2. ì €ì¥ì˜ì—­ì—ì„œ ê°€ì ¸ì™€ ê°ì²´ë¡œ ì—­ì§ë ¬í™”

## 6.2.4 ë‹¤ì¤‘ ì¸ìŠ¤í„´ìŠ¤ íŒ¨í„´

- í•´ë‹¹ íƒ€ì…ì˜ ê°ì²´ ìƒì„± ê°œìˆ˜ê°€ ì œí•œë˜ì–´ ìˆëŠ” ê²ƒ. == **ë™ì¼í•œ ìœ í˜•ì˜ ê°ì²´ëŠ” í•˜ë‚˜ë§Œ ìƒì„±**í•  ìˆ˜ ìˆìœ¼ë‚˜, **ë‹¤ë¥¸ ìœ í˜• ê°ì²´ëŠ” ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ” ê²ƒ**
    - ì—¬ê¸°ì„œ â€œìœ í˜•â€ ì´ ì‹¤ì œ â€œíƒ€ì…â€ ì€ ì•„ë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ ì•„ë˜ ì½”ë“œì—ì„œëŠ” loggerName ì´ë¼ëŠ” ë¬¸ìì—´ë¡œ ìœ í˜•ì„ êµ¬ë¶„í•œë‹¤.

        ```java
        public class Logger {
        	private static final ConcurrentHashMap<String, Logger> instances = new ConcurrentHashMap<>();
        	
        	private Logger() {}
        	
        	public static Logger getInstance(String loggerName){
        			instances.putIfAbsent(loggerName, new Logger());
        			return instances.get(loggerName);
        				}
        					...
        	}
        ```

- íŒ©í† ë¦¬ íŒ¨í„´ ê³¼ ìœ ì‚¬ ?
    - ì‹¤ì œ ë‹¤ì¤‘ì¸ìŠ¤í„´ìŠ¤ íŒ¨í„´ì€ â€œë™ì¼í•œ íƒ€ì…â€ ê°ì²´
    - íŒ©í„°ë¦¬ íŒ¨í„´ì€ â€œì„œë¡œ ë‹¤ë¥¸ í•˜ìœ„ íƒ€ì…â€ ê°ì²´ ìƒì„±
- ì—´ê±°í˜• ì´ ë‹¤ì¤‘ì¸ìŠ¤í„´ìŠ¤ íŒ¨í„´ê³¼ ìœ ì‚¬

# 6.3 íŒ©í„°ë¦¬ íŒ¨í„´

- ì²« ë²ˆì§¸ ë¶„ë¥˜ë²•
    - ë‹¨ìˆœ íŒ©í† ë¦¬ íŒ¨í„´ simple factory pattern
    - íŒ©í† ë¦¬ ë©”ì„œë“œ íŒ¨í„´ factory method pattern
    - ì¶”ìƒ íŒ©í† ë¦¬ íŒ¨í„´abstract factory pattern

### 6.3.1 ë‹¨ìˆœ íŒ©í„°ë¦¬ íŒ¨í„´

```java
public class RuleConfigSource {
	public RuleConfig load(String ruleConfigFilePath) {
			String ruleConfigFileExtension = getFileExtension(ruleConfigFilePath); // json, xml, yaml ê³¼ ê°™ì€ config íŒŒì¼ì˜ í™•ì¥ì ê°€ì ¸ì˜´
			IRuleConfigParser parser = null;
			if ("json.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new JsonRuleConfigParser();
			} else if ("xml.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new XmlRuleConfigParser();
			}...
	}
	String configText = "";
	// ruleConfigFileExtension íŒŒì¼ì—ì„œ configText ë¡œ í…ìŠ¤íŠ¸ ì½ê¸° 
	RuleConfig ruleConfig = parser.parse(configText);
	return ruleConfig;
```

ìœ„ ì½”ë“œì—ì„œ Parser ê°ì²´ ìƒì„±ê³¼ ê´€ë ¨ëœ ë¶€ë¶„ì„ ì¶”ì¶œí•˜ì—¬ ë³„ë„ ë©”ì„œë“œë¡œ ìº¡ìŠí™” í•˜ë©´

```java
private IRuleConfigParser createParser(String configrFormat) {
			IRuleConfigParser parser = null;
			if ("json.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new JsonRuleConfigParser();
			} else if ("xml.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new XmlRuleConfigParser();
			}...
			return parser;
}
```

SRP ë¥¼ ìœ„í•´ createParser í•¨ìˆ˜ë¥¼ ë³„ë„ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ê³ , Parser ê°ì²´ ìƒì„±ë§Œ ë‹´ë‹¹í•˜ë„ë¡ í•œë‹¤ë©´

```java
public class RuleConfigParserFactory {
	public static IRuleConfigParser createParser(String configrFormat) {
			IRuleConfigParser parser = null;
			if ("json.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new JsonRuleConfigParser();
			} else if ("xml.equalsIgnoreCase(ruleConfigFileExtension)) {
					parser = new XmlRuleConfigParser();
			}...
			return parser;
	}
}
```

- ë‹¨ìˆœ íŒ©í„°ë¦¬ íŒ¨í„´
    - í´ë˜ìŠ¤ ë„¤ì´ë°
        - XXXFactory ë¡œ ëë‚˜ëŠ” ë„¤ì´ë°ì´ í”í•¨
    - ë©”ì„œë“œ ë„¤ì´ë°
        - createXXX , getInstance(), newInstance() , valueOf() ë“±ë“±
- ìœ„ ì½”ë“œ ë‹¨ì 
    - parser ê°ì²´ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ë§ˆë‹¤, ìƒˆë¡œìš´ Parser ê°ì²´ ìƒì„±
- ìºì‹±ì„ ì ìš©í•œ íŒ©í† ë¦¬ë¥¼ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„

```java
public class RuleConfigParserFactry {
	private static final Map<Striung, RuleConfigParser> cachedParser = new HashMap<>();
	static {
		cachedParser.put("json", new JsonRuleConfigParser());
		cachedParser.put("xml", new XmlRuleConfigParser());
		..
	}
	public static IRuleConfigParser createParser(String configrFormat) {
		if(configFormat == null || configFormat.isEmpty()) {
			return null;
		}
		IRuleConfigParser parser = cachedParsers.get(configFormat.toLowerCase());
		return parser;
	}
}
```

- ìœ„ ì½”ë“œì˜ ë‹¨ì 
    - **ìƒˆë¡œìš´ ìœ í˜•ì˜ IRuleConfigParser íƒ€ì… ì¶”ê°€ë˜ë©´ Factory í´ë˜ìŠ¤ ì½”ë“œ ë³€ê²½ â†’ OCP ì— ì‚´ì§ ì–´ê¸‹ë‚¨**
        - **BUT (ì¥ì ) ìƒì„±ëœ parser ê°ì²´ë“¤ì„ ì‚¬ìš©í•˜ëŠ” ì¸¡ì—ëŠ” ì½”ë“œ ë³€ê²½ì´ ì¼ì–´ë‚˜ì§€ ì•ŠìŒ**
        - **íŒ©í„°ë¦¬ ë©”ì„œë“œ íŒ¨í„´ì€ ë‹¨ìˆœíŒ©í„°ë¦¬ íŒ¨í„´ë³´ë‹¤ OCP ë¥¼ ì¡°ê¸ˆ ë” ì§€í‚¤ê²Œ ë¨**
